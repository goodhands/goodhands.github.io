<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Optimizing Database Queries in large applications - Samuel Olaegbe</title><meta name="gridsome:hash" content="f01758c3a90c8b0c28c8d4d9d23a998a34a68c58"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="google-site-verification" content="n08k_-VUMxOElIwQG1EydSmCpreLYnx-vm5FqJODRX0"><meta data-vue-tag="ssr" name="description" content="Static analysis is the method of testing your code for basic logical, runtime or typographical exceptions without actually executing the code."><meta data-vue-tag="ssr" name="author" content="Samuel Olaegbe"><meta data-vue-tag="ssr" name="canonical" content=""><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.b85e5c05f148d5effafa72139acc9235.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.b85e5c05f148d5effafa72139acc9235.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.b85e5c05f148d5effafa72139acc9235.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.b85e5c05f148d5effafa72139acc9235.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cabin&amp;family=Crimson+Text:wght@700&amp;display=swap"><link rel="preload" href="/assets/css/0.styles.2c370e59.css" as="style"><link rel="preload" href="/assets/js/app.a471dd79.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.6991587b.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.8f34419b.js"><link rel="prefetch" href="/assets/js/page--src-pages-blog-vue.af427cc8.js"><link rel="prefetch" href="/assets/js/page--src-pages-experience-vue.b2383097.js"><link rel="prefetch" href="/assets/js/page--src-pages-hire-vue.4e94e02d.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.93e7c798.js"><link rel="prefetch" href="/assets/js/page--src-pages-projects-vue.6d043d01.js"><link rel="prefetch" href="/assets/js/page--src-templates-author-vue.e36fad39.js"><link rel="stylesheet" href="/assets/css/0.styles.2c370e59.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="h-full layout mb-12"><header class="header"><a href="/" title="Samuel Olaegbe" class="index font-body z-50 active">SO</a><div><nav class="nav font-body hidden sm:flex"><a href="/experience/" class="nav__link">Experience</a><a href="/projects/" class="nav__link">Projects</a><a href="/hire/" class="nav__link">Hire me</a></nav><nav class="sm:hidden flex z-50"><a href="#" class="block h-6 w-6 z-50"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></a><!----></nav></div></header><section class="flex flex-col sm:flex-row sm:space-x-10 w-full"><section class="article relative sm:w-12/12"><div><header class="my-10"><a href="/blog/" class="flex flex-row items-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="flex h-4 inline mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg> Go back
                    </a><h2 class="leading-10 mt-8 mb-4 text-2xl sm:text-3xl break-words">
                        Optimizing Database Queries in large applications
                    </h2><span>
                        4 minutes read
                    </span><p class="font-body text-lg mb-3">
                        Static analysis is the method of testing your code for basic logical, runtime or typographical exceptions without actually executing the code.
                    </p><a href="/category/my-sql/" class="flex flex-row items-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-4 mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                        MySQL
                    </a></header><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 970 546' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-15e0ff934bcba71077197cb8b0880d3c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-15e0ff934bcba71077197cb8b0880d3c)' width='970' height='546' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAkAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgj/xAApEAACAQMDAwMEAwAAAAAAAAABAgMABBESITEFE1FBYXEUIjIzYqHB/8QAGAEAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAgEQADAAIDAAIDAAAAAAAAAAAAAQIREgMhMTJBUWGB/9oADAMBAAIRAxEAPwD6poJA52rjMFUk1l9Vjurq1ZbS5W2mzkSMuoAfFVE7P8E3TlZSyafcXzXHlRIy7MAo3JNJorx2qrrV5lQDJ2DHHNVi4Dokd2oiaQaTG5yD7DzVaC2HhMpI9/FW81lGB4tAsSojXZo24I9j6VIX8MXeMzmMxDU%2bsYAHOfim%2bPPxDbHpp0Ul0%2b9jvbZJ4S3bfdSwwSPOKdBzWbly8MpNUsoquPwHzSsv6ZM4xpPPHFOTfqNKalzpJGT6eauPBUZNtcNb2sBjMeCwAVnyCP4mtDvW9yzRTFWZcMUb096pltBLCPpz2hqyUZNj7EUrKGW5lDhgO3sGTbg8H/K6MKu/syWZ6JLfqRO9ndRzQqjFcj7VIznccjzWfb3M1z0mWaaaSV2hZtYiwDzuqn%2bgedqOhI8vS1EbudSMqntCNR4IX0HimWjj6L05Zb%2bSWWNDgufvYk%2ba1amW5XuTBVVSuSuljv8AuP2XdBMps4VYSg437rZbOfXHrXoI8hd6otNDW8ciLgOoYbY5FMCuPlrZtnXxzrKRXck4UelLdtMYKgiiiifBsmoAGAMCusquMMAR70UUwOpGi/ioHwKsFFFSxkhUhRRUMD//2Q==' /%3e%3c/svg%3e" width="970" data-src="/assets/static/large-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg" data-srcset="/assets/static/large-mysql-db.1b91758.241187f68b97ee1a889effc56f45aff8.jpg 480w, /assets/static/large-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg 970w" data-sizes="(max-width: 970px) 100vw, 970px" class="left-0 right-0 w-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/large-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg" class="left-0 right-0 w-full g-image g-image--loaded" width="970"></noscript></div><div class="prose prose-xl mt-10"><h3 id="background"><a href="#background" aria-hidden="true"><span class="icon icon-link"></span></a>Background</h3>
<p>In this article we will take a look at how to optimize database queries in a Laravel or PHP application with a MySQL database. At <a href="https://expenseng.com" target="_blank" rel="nofollow noopener noreferrer">ExpenseNG</a>, our database keeps growing quickly as we record more government expenses from the Nigerian Open Treasury website. For an app that started at a bootcamp, we weren't prepared for the impact a growing database would have on the website. </p>
<p>With these amount of records we had the responsibility of visualizing these data on our website in the way that has most meaningful impact and passed across the right information, which is <strong>Where is the government spending most money?</strong></p>
<p>If you visit the <a href="https://expenseng.com/contractors" target="_blank" rel="nofollow noopener noreferrer">contractors</a> page on ExpenseNG, you will see the list of everyone that has received money from the government sorted by the contractor who got the most money in the last completed month and you can also see the total amount they got for that month. The data looks like this:</p>
<pre class="language-json"><code class="language-json">Contractor name<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
Total Amount Received<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
Month Ended<span class="token operator">:</span> <span class="token string">""</span></code></pre>
<h3 id="the-challenge"><a href="#the-challenge" aria-hidden="true"><span class="icon icon-link"></span></a>The Challenge</h3>
<p>Now that we know what the data we need looks like, let's take a look at what it takes to retrieve this data from the database.</p>
<p>Two tables are involved in this operation and they are the <code>contractors</code> and <code>payments</code> table. The contractors table holds the records of all everyone that has received money from the government and the payments table holds the records of every payment ever made and a reference to their recipients.</p>
<p>The tables schema looks like this:</p>
<pre class="language-json"><code class="language-json">payments<span class="token operator">:</span>
	- amount (double)
	- date (DATE)
	- recipient (string)

contractors<span class="token operator">:</span>
	- name (string)
	...</code></pre>
<p>To sort the results from getting all the records from the contractors table by the total amount received by a contractor from the past month, that already sounds like a query involving two tables and we can achieve that with something like this:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> contractors<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">from</span> payments <span class="token keyword">WHERE</span> 
recipient <span class="token operator">=</span> contractors<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> total <span class="token keyword">from</span> contractors 
<span class="token keyword">order</span> <span class="token keyword">by</span> total <span class="token keyword">desc</span></code></pre>
<p>From the query above, we have a sub-select statement which helps us to calculate the total money received by all recipients and we can use the result from that sub-query to create a new column in our query which we can now use to sort our final result. The new column created by this sub-query is given an alias of <code>total</code>. </p>
<p>The query above doesn't include the logic for fetching only results from the month ended, so we will modify the query further below:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> contractors<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">from</span> payments 
<span class="token keyword">WHERE</span> recipient <span class="token operator">=</span> contractors<span class="token punctuation">.</span>name 
<span class="token operator">AND</span> <span class="token keyword">date</span> <span class="token operator">BETWEEN</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation">,</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">31</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">as</span> total 
<span class="token keyword">from</span> contractors 
<span class="token keyword">order</span> <span class="token keyword">by</span> total <span class="token keyword">desc</span></code></pre>
<p>In the above query, we have added a new constraint to the sub-query which is <code>BETWEEN</code>. As you know this allows us to select only results that start from the first value and end on the second value.</p>
<h3 id="new-problem"><a href="#new-problem" aria-hidden="true"><span class="icon icon-link"></span></a>New problem</h3>
<p>The query above works fine when you have a few records in your database, but when working with a database with thousands of records this can easily result in the query taking several minutes to execute or even resulting in a request timeout error on the server as the server doesn't receive a response for too long.</p>
<p>We can easily solve this problem by adding an index to the columns that are pivotal to our query, from the above query the columns we should add an index to are:</p>
<ul>
<li><code>contractors.name</code></li>
<li><code>payments.recipient</code></li>
<li><code>payments.date</code></li>
<li><code>payments.amout</code></li>
</ul>
<p>The query to add an index to our columns will look like this:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> contractors <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> name_index <span class="token punctuation">(</span>name<span class="token punctuation">)</span></code></pre>
<p>Or if you are using Laravel migrations:</p>
<pre class="language-php"><code class="language-php"><span class="token comment">//database/migrations/2020_09_20_102101_add_index_to_payments_table.php</span>
<span class="token scope">Schema<span class="token punctuation">::</span></span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'payments'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">index</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'recipient'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">index</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'amount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">index</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'date'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now we can reduce our query execution time greatly by adding indexes. On ExpenseNG, our queries went from timing out after several minutes to a about 0.02 seconds with a pagination of 20 results per page.</p>
<p>We can further improve our query execution time by only selecting the columns that we need, we will change this line to look like this:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> contractors<span class="token punctuation">.</span>name<span class="token punctuation">,</span> contractors<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">from</span> payments 
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>
<h3 id="using-laravels-eloquent"><a href="#using-laravels-eloquent" aria-hidden="true"><span class="icon icon-link"></span></a>Using Laravel's Eloquent</h3>
<p>We can achieve the same queries as we did above in Eloquent by using the <code>addSelect</code> method to create a sub-query to our original query:</p>
<pre class="language-php"><code class="language-php"><span class="token scope">Contractor<span class="token punctuation">::</span></span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'shortname'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token operator">-</span><span class="token operator">></span><span class="token function">addSelect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'total'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token scope">Payment<span class="token punctuation">::</span></span><span class="token function">selectRaw</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'SUM(amount)'</span><span class="token punctuation">)</span>
		    <span class="token operator">-</span><span class="token operator">></span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'recipient'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'contractors.name'</span><span class="token punctuation">)</span>
		    <span class="token operator">-</span><span class="token operator">></span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'date'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$monthStart</span><span class="token punctuation">,</span> <span class="token variable">$monthEnd</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'total'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Here we are using Eloquent's advanced sub-queries which gives us a nice and comprehensive API to retrieve results from our model. If we wanted, we could lazy load our <code>Contractor</code> model relationships by chaining the the select method with <code>with('payments')->paginate(20)</code>.</p>
<p>And that is how you optimize database queries on a large MySQL database.  </p>
<blockquote>
<p>Adding an index to a table makes <code>UPDATE</code> queries run for a longer time, so you should not use them on tables that will get update frequently.</p>
</blockquote>
<h3 id="resources"><a href="#resources" aria-hidden="true"><span class="icon icon-link"></span></a>Resources</h3>
<ul>
<li><a href="https://dzone.com/articles/how-to-optimize-mysql-queries-for-speed-and-perfor" target="_blank" rel="nofollow noopener noreferrer">https://dzone.com/articles/how-to-optimize-mysql-queries-for-speed-and-perfor</a></li>
<li><a href="https://laravel.com/docs/8.x/migrations#indexes" target="_blank" rel="nofollow noopener noreferrer">https://laravel.com/docs/8.x/migrations#indexes</a></li>
<li><a href="https://laravel.com/docs/8.x/eloquent#advanced-subqueries" target="_blank" rel="nofollow noopener noreferrer">https://laravel.com/docs/8.x/eloquent#advanced-subqueries</a></li>
</ul>
</div></section><section class="h-128 sidebar sm:mt-90 sm:w-5/12 sticky w-full"><header class="sm:mt-0 mt-20 mb-2"><h2 class="sm:text-lg text-2xl underline">Recent Articles</h2></header><div><div class="h-auto border-indigo-400"><a href="/optimizing-database-queries-in-large-applications/" aria-current="page" class="flex flex-col items-start justify-between mb-4 active--exact active"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 970 546' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-15e0ff934bcba71077197cb8b0880d3c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-15e0ff934bcba71077197cb8b0880d3c)' width='970' height='546' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAkAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgj/xAApEAACAQMDAwMEAwAAAAAAAAABAgMABBESITEFE1FBYXEUIjIzYqHB/8QAGAEAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAgEQADAAIDAAIDAAAAAAAAAAAAAQIREgMhMTJBUWGB/9oADAMBAAIRAxEAPwD6poJA52rjMFUk1l9Vjurq1ZbS5W2mzkSMuoAfFVE7P8E3TlZSyafcXzXHlRIy7MAo3JNJorx2qrrV5lQDJ2DHHNVi4Dokd2oiaQaTG5yD7DzVaC2HhMpI9/FW81lGB4tAsSojXZo24I9j6VIX8MXeMzmMxDU%2bsYAHOfim%2bPPxDbHpp0Ul0%2b9jvbZJ4S3bfdSwwSPOKdBzWbly8MpNUsoquPwHzSsv6ZM4xpPPHFOTfqNKalzpJGT6eauPBUZNtcNb2sBjMeCwAVnyCP4mtDvW9yzRTFWZcMUb096pltBLCPpz2hqyUZNj7EUrKGW5lDhgO3sGTbg8H/K6MKu/syWZ6JLfqRO9ndRzQqjFcj7VIznccjzWfb3M1z0mWaaaSV2hZtYiwDzuqn%2bgedqOhI8vS1EbudSMqntCNR4IX0HimWjj6L05Zb%2bSWWNDgufvYk%2ba1amW5XuTBVVSuSuljv8AuP2XdBMps4VYSg437rZbOfXHrXoI8hd6otNDW8ciLgOoYbY5FMCuPlrZtnXxzrKRXck4UelLdtMYKgiiiifBsmoAGAMCusquMMAR70UUwOpGi/ioHwKsFFFSxkhUhRRUMD//2Q==' /%3e%3c/svg%3e" width="970" data-src="/assets/static/large-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg" data-srcset="/assets/static/large-mysql-db.1b91758.241187f68b97ee1a889effc56f45aff8.jpg 480w, /assets/static/large-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg 970w" data-sizes="(max-width: 970px) 100vw, 970px" class="mr-3 w-full mb-2 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/large-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg" class="mr-3 w-full mb-2 g-image g-image--loaded" width="970"></noscript><div class="flex flex-col"><h2 class="leading-4 text-xl">Optimizing Database Queries in large app...</h2><span class="font-body text-tiny text-gray-500">12. October 2020</span></div></a></div><div class="h-auto border-indigo-400"><a href="/static-analysis-with-phpstan/" class="flex flex-col items-start justify-between mb-4"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1261 628' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a990670bf1029326c98e49982fe9b25b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a990670bf1029326c98e49982fe9b25b)' width='1261' height='628' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAABYlAAAWJQFJUiTwAAAKcElEQVRo3uVZWXMjVxWWZUmWLMm2JKsldbda%2b9JaWmtrsSx7tjBQIQ9AKLIUk0ASlkBYCv4F71SKkBTFn4BAWB74Xx/fuVLLGluezJBQYcjD0b333HO3c8/y3ZYvfHiMpG5BK9WgFSukKqLHpxB%2bJHryf08%2b%2bTkIxxE6iG3IO/ynKUH6n0bmcd7xY/UvWtE%2b2cBhLIHD%2bBbFrgQOo4kNbQ889Ch2VY9s8SJe37X64fU5YidPpez/ogUcIxiKw78fxX4ghv39mCpDB0cIRlg/iMB/EIY/FEaI7WD4GPuhI/iDHMPSF4iv6qQAx/g5l/CkLqWP/H3W91gKydhg%2bGgzx9563NNa1OeugAMuWGoVMDi3YY8qqDklRRlLQ15rolc5h1O%2bIJ1DS5WgZ08xaOXh1A00Kzm4HQsd1ls1UlVXdeG1azpmjoV%2b02TdQL9lwmG9WsjCymfgNAx0KCNlwdCe6eA3FLVVf1YFKgU0nAaGyy7cyx5G522Mlg7yVZMbs%2bG272HSeQFu6wGK%2bTbSp0m0GybGbQtDKuKsX%2bDhdfTsPBqlnFKOHLxVNTB3Cph2LXVwlzzpa5R1GHoGI47vcZ6BbaJiZXAQOVGuuHKXK3fbrt9Gu2S2eU9SilJAtdJCociDjy/hOBP0h3PU6h3kmRkm8wWqrRa6gyHqdhu%2bvQP46C6K/IeKxJz36DZ7wZgyaWX6%2b%2bzzRVjGVJ/Iq9IfwZ7qC3OuyHp8HMGDKAKhKEIMyPvBwxv1IIPzQeRY8aTt9Qvfk/HkPF7wKQK6UkBvMMXQPUOn4%2bA4mUOnO0a7O4DTG0M3iqrdH7iUm6DbG8FudzEYuqyPkS9UUaCipG0xher5MvJWGYPxAu5khmqtiY4zxtn5HQxGM4y5TtsZYbm8oMwZx43VPCIzm1%2bo%2bvLyHqbTM8UbTRa8kAnszgClcp1zzLmvEfcjYwbos%2b1Ol%2bj1x3Bn56hUbdTsHmZnF6g2OojGPs0CIkfQzTIP1Ue93kbOoEm3e2jYDhcYoVxpqL5KzUarO1SLV2st2K2e4pcqTaWEJtvFcoPKaNB6bDRaXdS4gfniUikzeZqDlrNgUEG6WVJKknZWMEg2D4M8IanLfLpZ4F6KMK2K2pPwT5KaUnAml0eWJDzpzxdqSkb6tKyJdHa1jvTH4slPV0D86JSaa3EDZeS4cL6w2qSRL3GBsppMSn29yU2bG5TNyibMNU/qclNahr6er%2bL84j7nbtLMozTh%2bMZEhcSEPdrmrUz5pqzsdfe46I05vfquw2/zfB4jsDVJILQu13657V/bbaFt/7vieQdgnNgLKRlZQw4gfrwqb6cr2aPPVdaT31aCAkJRmsmpZuA0bdBUdSRSGSSSWaROV23hS38ypSOdMRVlaF7bpbZVKjPc1PNKRsZrW2U6Y2zmUrJSqj7zs8lqT5LVFfh6zAK8RiKVRjZvQC%2bYDBwJJNIaCvUCeTy0nkNKy8AomfTDtFJY7Cj1HFJytwuIWeasHNpuHf1FUwGLREZDf2ljSIDUHNcIkqpYvNhH1swplPg4pr/9bbDNC18DLNflr8uGD3fPu2us4u9Y47YxN1wgRVOXSC1mn0hlcZzQcHREOtZYz5CfU3XpS5LEvJKnWTVG8Vh6Zphct2VMKq0r05MIrtzo1JPV132Gkr%2bSNTayqa25pc%2bbV0xa2mklm1ntgaW3lsiJG6/WW82h5Lnnw9gOC5BomWE6kmjtBQsZbHeGzKVtVOstlZLqTHVSl3Qni5hMP1UCphLHVZga84WKWqzE1Cm8QqmufFDSU63ZZaYoqawh68j80k5zw5Kvi8wcWaZFnbw6ZSXDZHWuyb4C8UWFKbppd2FJ1lGp0FK4Q1JtjXuSMUWmZIkXVcUjauVlVKoNtZ7MIee6bh0rBbBD5VxOrFINHyu6YeLh/QXRH%2bHxeM7cL7m9jxGBTLPlqI30hjMM2WcTNwiAqXMjJpUgeV/AS63ZUQeS9nxxVymk1iaWICAyig00e1OizSbsnguHwEZSaINKnp3fVYBm4C5wcecBcUlfHW4bdwh2kYsQxdZ5SW1iFFGSWIBDwCZ7yplFhUlEATb3LPD4uttsgqCXOyVKBpjCDD2L%2b/MKYidZOH1XUa8/wXhypsy4w/Z0tlTIrOsMYVjM%2bctLhcY6bNvtgVJOgqbX57gmN5kqtaH358g6C%2bQHF8i1ZihNX0A0nadyqrCskrq9dttRlzGZXXCsi9FoihSDr8%2b3z9dqmHSAAFPrni/AVyzbAcJrfwj%2bvSCCwidPyE%2b%2bpGF/YJWqd8Ui3y6cLFZwdJLmrU6Q5w0WeXN9IkAxu1argzrhraQ2gaOFYlmhRJdQ2CAak1sejibo8UYMWlWbmtfpXv3%2biIrpw%2baNyVyaWYE1vofi8BLl2QsoT%2b4j353D7MxRmvDh5V7CYLswukBxdInK/CuonX8NFhVXnrGf75b68iVoRbqTVUd5eh/l%2bUPkGn00qESFTmkxQ1qbbli3vgl82x2ej4RZxhJZlFsD5BsDlJ05GsMzZCpd2NO7qLl3YLVcFFpUSqWNUv%2bM/QuYdcLhzgSN8QUzxyXM5hDNCWXtAaqUKffmqPRmaPSnyFXps%2b4DFIZL5Pu0iN5i3b6jFFJy70LjesXRHR72HlIFG0mzSqqRKjjRy2o/8VQO0RMGZ6OMlNXAUdrcBL9MrqCQ69ETPvFtLOCQmUBu3ftElsiWkCnzbWC7ykyN7gSF3hksbjDXmqjNmr0lKjNC3cVXocttUVH53jkP8FC1S7zV8uIhD3CBAuWt4V3e4JKHaSJb66HMQ5odWk7bhdmeoHL2Iqq8RbMzVbeulRkAh7xx9x6ytKZAIIyQQGp5GYYJdUMRdVnq8oRH5Bkm3A5FVrDZc%2btdqfkxBYhQgQFFTNrD4fLYOF/e4QvQhTueosQoKoHOdWfodnvIMtq2uyP65wxOt4%2bxBD1GXI38AYPQgGYuwa/IoFirNRgPpnD42pRoLAG123U4li7GQNXlq8%2bma2laDuPxRD3GOpxT4oaYskPZLl%2bDC74rMkR0AtVXFrsNg4//cyh8GEsq//ZgrZdbcyoV0YwYnaWUtCIPIeHLw0jSm9f2ygzltvuyimet5lm/0KRf1tK356IiNL7ipO2RjFElY4vURRnS9uDuFRS%2bKq%2bgsLGBwhuZ9BOg8Da8lbrX3tSvtwkrBTJ77V1jds6zrt8md73/qkyqNCb1%2bGeAwzdcILz9hfdLQNFoYnVxa1IxwBeSz1sHK2LeVKXkUI8nxLyqaJsnMsHIqnxeKchI%2bevlPfzxzXfw2zfexvss33/0Fj765qv43Wtv4oNX38DvX3mED19%2bDR9%2b%2b3W2H%2bGDV77Lvjfw0Te%2bgz%2b89C3Sy88t%2bQJUwG8efh3/eu9X%2bNO7v8CfWX787s/x90fv4C8/%2bhk%2b/skv8dcfvodP3voxPnn7XdZ/qkj6/vbmD/DP176Hf7z%2b/eeWlAuIEvyEkPLlZj%2bwKv3rL6uK6CL%2bNcnXnv31lyCR8cvYcOy5Jd%2bX5U/QJ/43%2bKyDbhvzpI8RN2X/h/4dftaDx%2bKJ9T%2b7j/fFjxKbw61krvjXEVgsvvpL64tWxL8Bhh1xjbW2SDsAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1261" data-src="/assets/static/phpstan-cover.33b39b9.4f84e10b267f2418e52beee38767eb0b.png" data-srcset="/assets/static/phpstan-cover.1b91758.4f84e10b267f2418e52beee38767eb0b.png 480w, /assets/static/phpstan-cover.33b39b9.4f84e10b267f2418e52beee38767eb0b.png 1261w" data-sizes="(max-width: 1261px) 100vw, 1261px" class="mr-3 w-full mb-2 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/phpstan-cover.33b39b9.4f84e10b267f2418e52beee38767eb0b.png" class="mr-3 w-full mb-2 g-image g-image--loaded" width="1261"></noscript><div class="flex flex-col"><h2 class="leading-4 text-xl">Static analysis with Phpstan</h2><span class="font-body text-tiny text-gray-500">1. October 2020</span></div></a></div><div class="h-auto border-indigo-400"><a href="/using-arrow-functions-in-php-7-4/" class="flex flex-col items-start justify-between mb-4"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1156 988' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-62cca0ba6826efc6ed9ac79d675e6565'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-62cca0ba6826efc6ed9ac79d675e6565)' width='1156' height='988' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA3CAYAAAC8TkynAAAACXBIWXMAABYlAAAWJQFJUiTwAAAI/ElEQVRo3uWWeW%2bTVxbG8xkqFalSpUqVZjSjGU01ooWBFsoaApSwL4EQlixkIwvZIWnCFhIIZHEWb3HseHe8xnbseMnqQAIEQqEl0BLaUlWzaj7CM/fe168xHtMwNJFGef/46bz3nOece%2b5DCCRYh87AEixmOMfL4AqVwxkqW7K4QhWwjxXi7kMvns/9AwlXJUdxo/s4GsVH0dCZCvt4xZLGNloJ91QRqi%2b4sG/XCyQ0So7BPnEWZlJoEKfBNFwOy3glLGNLk76RKjhvn0FBqRNrVv2AhLq2VNRLjqNBegL0Wz9UCdPYWZhGq5YkhuFzsE%2bWoLDChY1riQG64bNQDpZD5auAikR61o%2bcW7Joh6phnixDQbkbG9YQAzTD1dCO1kSg56VMb7AGxlvlOM0boByqQTSqJU5PsBa6m5XIKxvgDFCQhJCQB%2bqgnqhCLm%2bALFiHXyQQJwbm6XnTvljNfLPm64t3jslJ/eehDJ1DTpkHG6kB4sB5CIlO30V0j1cjuzRsQIf/IhaL9v%2bDWbF9osFLkIzVIKvUyxnQ5ruEVkJbFK87t8bhbfta36Ivnja2r3WevlbvZXSO1iKTN%2bDG4GXEp34e3qTv8hv21v%2bqvub/ZVfPFYhG6pBRMsgZcM17BYLC04CW4QtIL/Fx/xNsIAlBMdCIpqGLOEkM2EQNuDxwFYLCfQ2Nwcs4fsZPDPgeCRdIQlC4mlAfqMcx3oBadxMYrnCM/Y6hLja3EH2/0FsXb94b3hm3z3kdF/1XkFYc4Ayodt2AoOhvRp2vEUd5A6qczRAUjhZUD15FanEQm6kB5f0tEBT2VlQNNuFwUdiAEkcbBIVNhHLvdaQUDXEGFNlFEBS2dpR4mnGIN%2bA0ScSjwN6BQnsn923rIPF1cHWqLbTHr9NI5/FE1wuiZvD3vtRwvdxsbj5f53O8lj/zfawWmRGFtQNFAy04WDjMGZBr7UQsebZOZFvacdLUwr7j1aPJsXQwbaa5La6WRjovyyxiMbbGxY7IvXQen8%2bxcrMz%2bloJbaxG56SbWlmeftPe9D7uzM%2bh33TWf%2b1v6UK%2buw37eQNOkUQ02VYxMswdKHOrIJ3ykcHtLEfJstCFxOShnUxDazQWOxUwzIyjfWKAzaA6Cu05Ge4vdSlxKWhC/ZCZ9VMd7c0Ja3JtEjavzm8gv6V1rEYpcMjZ7K5bHlwfc7C96AwZ2c04E0IN0Z52yKC7Pwbt/VHk26U4bmpj9YqBXjKzg90feaNZjByXCPsKR5BIDciwkAdHkWWV4oihDZKpAJ78/WdcCJjhmb0P5zfTMD%2bchOXhFLlonGEh55aQG5UeHR799QUUd4YgnvSja9JH9HfhfnwP8ttBGB5MwPV4GoFvH6J3ehTGBzcjDJDZ3aTP%2b2QG%2bQ4FGkccsD26TbRfoY0YWuxU4e5PzzD03SPc/P4J0488%2bxpjc98g9HwW/eSew/o2NIzY4Xv6AAe0zTgf6MOP//4nav0mpBnbkWmRvHxjnwRZznbsLRjlDDhhliIeo3OPMfnjtyxq7ofII25BP3OLLPYIDmLGnRdzePavv5HHBlHkVDNdbcCC4Wd0sSdk4a9h%2bmoSD37%2bAcrpMajvhciy06zue/oQQfKg0blZopmCe3YGM0RX4zOjacxNHjwH66M7xOQJ5DmUmP7pOaq8xvAek2TOPYyTx9OZ%2bf0qHNCJWK1%2buB%2b59h52H92tOeRBip78pFpkL99mkiG9vxN7mAHPkZDWJ0M0qSYpMm1KVPusyLD2oGHUjTNuA8o8RmTbVWid8KPQqUXJgIH8e2pGjr2X6cs9JuzTduDKiBvXxjyo8PaxHOVGaJDojaxWRs4Xgv24NOxkM2j97KAF18e9yCJz8vs1qAvYma6E3JtOdqgks3ZrRCglM07ZVKyvlmjSyGNSDGIc65PjS78Nx81ytvdR8gaqzXWoccQoZfXIG41yHHN0YXfBGGfAEVM3YjlMRAf0Ehb36cQ4ZJDiICHFKMNebRc5y9j5gJ7LUR09H%2b1TMD3VHCT9nEYSPktZjeb3k8h9Sxn7dZwmxSBj0PrB8J387DQymz8fCs%2blu6aGd%2bbO8kj%2bUHjf1Nj3GUiPXYKdp8MGHDIqEI8UUw%2bLh0lMoecwL889Ec0r%2bj4ljlh6WaS6I1Y1Ugm0TvOsZlYh1Ub%2bdKzcN6%2bh34dJPdWmYXp2Nisjs6P3iL47%2bv4U/mzsiXy/goHkbVIknx7HFmrAfpJYMIxK7FXLsEPcQqIUW1sbsf78WWxvb0KyTIQ1lWeQePUi1p4rZXFzw3ms%2b7KC6ZKarzDtutpKlt%2btEmOnXISdpG9Bd9QrccAqx458YsDnxIA9ehUWBiX2GFTYpVFgRzf5O6btQZLoOj7OO4XV5cXY0noNH504ik%2brSvFJfjZWFORidWUJVpUVY1VpIdPR3PLsDKwsymf9yT0SxsLtSNCpsNfSjS/yQ5wBO3W9WFD0auwyarDLoGbnHSpymZI43qtAoqg5rFOxuMuoZbpkrSqcU0VmsDkGDWNB99OS2WYFtvMGfEESi4aOoNdw6DRINupZjBDRaWJYxJ00ZD75/bQ1b4IzYKtWi0WFXPgq2qiojTrHaBZrHzXBpEISb0CiRgdB0atHolGNLXk3kUQN2KjWQ1CoDNhIfkcl5t7iDFjXa4SgUBnxuUGHTbwBa1QmCAplHz7Tk5%2bE3EliwBwSVpOEoOgxY5XOiA05YQNW9lggKBQWrNCasD5nClupAR8rrBAU3TYs1/RhHW/AnxV2ROiOIV4uuvZr%2bxSvqS3mnXI7PlJbsDb7NmfAn7odEBQyB/7Ya8Ua3oA/yPshKGRO/F5lx2en7nAG/E7mgqCQuvBbpQOf8gb8RuqGoJC48WGPE6tP3cU2asCHkgEICrEHHyhc%2bEvWNGfAB2IvBEWXF%2b93u7GSN%2bD9rkEIis5BvCf3YEXWPWxbRwx4r9MPDl9UjCVe3Y/5e9%2b2z/eaWry%2b193rj3/u8GOZzItPMqkBz5DwLim82yUgOgN4Rz6I5Zn3sZ0asKx1GO%2b2CIdlzcN4pyOI5ekznAG7055g7bZZbEiexXohsIOLm5OeImnTd/gPenGNYnZNKBkAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1156" data-src="/assets/static/arrow-fn-php7-4.230370a.61dd10036131265bdcb9cca223b61090.png" data-srcset="/assets/static/arrow-fn-php7-4.1b91758.61dd10036131265bdcb9cca223b61090.png 480w, /assets/static/arrow-fn-php7-4.230370a.61dd10036131265bdcb9cca223b61090.png 1156w" data-sizes="(max-width: 1156px) 100vw, 1156px" class="mr-3 w-full mb-2 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/arrow-fn-php7-4.230370a.61dd10036131265bdcb9cca223b61090.png" class="mr-3 w-full mb-2 g-image g-image--loaded" width="1156"></noscript><div class="flex flex-col"><h2 class="leading-4 text-xl">Using arrow functions in PHP 7.4</h2><span class="font-body text-tiny text-gray-500">12. March 2020</span></div></a></div><div class="h-auto border-indigo-400"><a href="/implement-the-os-supported-share-dialog-on-your-website-the-using-javascript-web-share-api-2/" class="flex flex-col items-start justify-between mb-4"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 690 846' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-377732c680d4f4da64883ecd90b1e509'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-377732c680d4f4da64883ecd90b1e509)' width='690' height='846' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABOAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABAUDBggHAAH/xABBEAABAgQEAQYKBgsBAAAAAAABAgMABAURBhIhMQcIExhBUdEUIjdWYXF1lKHSFRdzgZOxIzZCRlJjgpGSorLw/8QAGQEAAgMBAAAAAAAAAAAAAAAAAAMBAgUE/8QAJBEAAQQBAwQDAQAAAAAAAAAAAQACAxEEEiExE0FhcRRR8KH/2gAMAwEAAhEDEQA/AAML8nCXquFaTV5zFSpVU9LtvltMqClGcXy3KtfXDdvkuSbhIbxk4sjfLKJNv9o7lw2aQ7w3wul1CVgU2XIChfXIIsTDMsyAphDKM%2bgKLDNubenri1ivKpRvws3dFdjzumPcx80ePJWlzvi18%2buSHzRpiEeIcT0%2bgLbRPCYUpaC5ZpvNlSDa57NYo%2bQMGpxoJ0UD5nBkYs%2bFwPoqy3nY97kPmj3RVlvOx73IfNHfsOYkkMQpeMgJhJaylQebyEg3sR2jQ6w6gZIHjU02ESwvheWSCiOyzP0VZbzse9yHzQixzycG8NYQq1aYxKuZXIS6pjmVygSFhO4uFaaRpV3FtLbqBlVF8pByqmA3dlJ10KvuOu2hhZxm8lGLPZz35QxzXNrUEhr2PvSbpG8MfJzhf2bL/wDAgmSw3KSj8q%2b1n55hZXmOxJCgbC9hfNrbe0DcMfJzhf2bL/8AAh4zINMvBxCn7glVlOqKbn0Xt1wsgHlOa9zRQPKKii47pFYm65T5ylSTc7LIYWxMMrdCA4lR1Sb9RB3GxEXqAKnJOTIC5dZS8BluXFoBH9J7YrJGJBpKfi5LsWTqNAPI387dqVZ4fUusyc9VputyyJUPhpthlDgWEIQCAkW6gLfGLqNxANOk1y93H1KLxFrB1a0AegK2gt5tLrS21ZsqhY5TY/3gjYGN0hRlZDsmQyuABNccbClzJvAbzC5qRMgJlt5sNN1Bc0AGLIWjOGwMxVlcIINxcQ64vthnhDihpJJCKW4gE7mybQ%2bNLfD7YQu8uldzd5zOU72JvrqTvpCHjA2GuEmK0JKiBTntVKKjt2mOmWd81alnw4zIL0KXA61t8JKItkkOpozZRl3uGtLRXZeZl00%2bjvScwDOrdlspQ8VOLUonnQoX6uy2mnbFp4c879WeGvBwgvfRkvlzkhN8g3tDNuXnEO84iQpaF/xpUc3p/Zh2NlCFpBFrmzMH5Lg6%2bB%2bI8pudzCSuONJn5NEyspZUld/GKRfq2h3CutTngobCWmXVHqdSojU2FiAfTGVl4/yIumD3HO/BBWrE8Ru1FQ4fLfhE8lhwrZCkZfGKgPF11MOhuIX0maTMB1IbbQUnZtKgPiBrB6r5Tltmtpfa8Tiw9CIRnz/TaJX9R2pcVnpatMTC5%2bbMwqrKUrIpC1Apd1yhIvtewt6tDqYuvF8rPCLFBeADppjmcDYHLr8YsZNU5wK8Dp5IGi%2beVcH/ABiu8Ys31S4q5wJC/o124Sbi%2bXqjpD5HCpDf16TsjIbK1oawNr6RfDpwtcMMOuAXKKUyoA%2bhsGKtg/iVPVmqy0lOScqyp50N/oyo6HY3Jt90WrhuhLnDTDaF3yqpbCTbsLYhHhrBuGqdVJWYlJ6YmZptaVNhxPXqRskdX5QxhZpOrlZczZy8GKq73fjiu/POy6LCfFNeZw7S/DH2nXipYbQ03YFSjfrOgFgYcQnrxpM00ZGrlCkGznNrSq2moNxEQlgeDILb3TpQ8sIjNHsp6BVmq1S2p1ltxoLuFNuboUNxDGF1HdpwZEpS1N82yLc22CAn/wBeDnXENNLccOVCRdR7BESFpeSwUOyswODQHcquP4vlma8aeZSYLKX0yq5oEZEum1k23O417oC4zeSjFns578onXK4VXXPppaGDURZXPqSu4sLA22v6bXgXjA4h7hHipxo5kKprpB7RaGzuhOnpAjbe/v8AevSTA2Zurqm99vX737XFsJ8pOiUTC9Jpb1AqbrklKty6locbAUUpAJFztpDXpT0Afu3VRf8Amtd8ZKgiVmAwHAWkuBYA1Nrb9/wEJpOtau6U9A83Kt%2bK33x7pUUC36uVa32rffGSRtEks7zLyXAkKKb6H1WgoItaxHKnoHVhuq/c613x96U9B83Kt%2bK33xk2Yc559xzKE5zew6ojgoIta1PKnoCgQcOVUj7VrvhHjrlG0XEmDqzRpehVJl6flVy6XHHGylJULXNjeM1zD3OhvxAnInLe9yrW9zEUTSLX/9k=' /%3e%3c/svg%3e" width="690" data-src="/assets/static/js-os-dialog.ae4d66c.f07ac15459475211268af26cc10900b6.png" data-srcset="/assets/static/js-os-dialog.ae4d66c.f07ac15459475211268af26cc10900b6.png 690w" data-sizes="(max-width: 690px) 100vw, 690px" class="mr-3 w-full mb-2 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/js-os-dialog.ae4d66c.f07ac15459475211268af26cc10900b6.png" class="mr-3 w-full mb-2 g-image g-image--loaded" width="690"></noscript><div class="flex flex-col"><h2 class="leading-4 text-xl">Implement the OS supported share dialog ...</h2><span class="font-body text-tiny text-gray-500">9. January 2020</span></div></a></div><div class="h-auto border-indigo-400"><a href="/implement-the-os-supported-share-dialog-on-your-website-the-using-javascript-web-share-api/" class="flex flex-col items-start justify-between mb-4"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 690 846' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-377732c680d4f4da64883ecd90b1e509'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-377732c680d4f4da64883ecd90b1e509)' width='690' height='846' xlink:href='data:image/png%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABOAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABAUDBggHAAH/xABBEAABAgQEAQYKBgsBAAAAAAABAgMABAURBhIhMQcIExhBUdEUIjdWYXF1lKHSFRdzgZOxIzZCRlJjgpGSorLw/8QAGQEAAgMBAAAAAAAAAAAAAAAAAAMBAgUE/8QAJBEAAQQBAwQDAQAAAAAAAAAAAQACAxEEEiExE0FhcRRR8KH/2gAMAwEAAhEDEQA/AAML8nCXquFaTV5zFSpVU9LtvltMqClGcXy3KtfXDdvkuSbhIbxk4sjfLKJNv9o7lw2aQ7w3wul1CVgU2XIChfXIIsTDMsyAphDKM%2bgKLDNubenri1ivKpRvws3dFdjzumPcx80ePJWlzvi18%2buSHzRpiEeIcT0%2bgLbRPCYUpaC5ZpvNlSDa57NYo%2bQMGpxoJ0UD5nBkYs%2bFwPoqy3nY97kPmj3RVlvOx73IfNHfsOYkkMQpeMgJhJaylQebyEg3sR2jQ6w6gZIHjU02ESwvheWSCiOyzP0VZbzse9yHzQixzycG8NYQq1aYxKuZXIS6pjmVygSFhO4uFaaRpV3FtLbqBlVF8pByqmA3dlJ10KvuOu2hhZxm8lGLPZz35QxzXNrUEhr2PvSbpG8MfJzhf2bL/wDAgmSw3KSj8q%2b1n55hZXmOxJCgbC9hfNrbe0DcMfJzhf2bL/8AAh4zINMvBxCn7glVlOqKbn0Xt1wsgHlOa9zRQPKKii47pFYm65T5ylSTc7LIYWxMMrdCA4lR1Sb9RB3GxEXqAKnJOTIC5dZS8BluXFoBH9J7YrJGJBpKfi5LsWTqNAPI387dqVZ4fUusyc9VputyyJUPhpthlDgWEIQCAkW6gLfGLqNxANOk1y93H1KLxFrB1a0AegK2gt5tLrS21ZsqhY5TY/3gjYGN0hRlZDsmQyuABNccbClzJvAbzC5qRMgJlt5sNN1Bc0AGLIWjOGwMxVlcIINxcQ64vthnhDihpJJCKW4gE7mybQ%2bNLfD7YQu8uldzd5zOU72JvrqTvpCHjA2GuEmK0JKiBTntVKKjt2mOmWd81alnw4zIL0KXA61t8JKItkkOpozZRl3uGtLRXZeZl00%2bjvScwDOrdlspQ8VOLUonnQoX6uy2mnbFp4c879WeGvBwgvfRkvlzkhN8g3tDNuXnEO84iQpaF/xpUc3p/Zh2NlCFpBFrmzMH5Lg6%2bB%2bI8pudzCSuONJn5NEyspZUld/GKRfq2h3CutTngobCWmXVHqdSojU2FiAfTGVl4/yIumD3HO/BBWrE8Ru1FQ4fLfhE8lhwrZCkZfGKgPF11MOhuIX0maTMB1IbbQUnZtKgPiBrB6r5Tltmtpfa8Tiw9CIRnz/TaJX9R2pcVnpatMTC5%2bbMwqrKUrIpC1Apd1yhIvtewt6tDqYuvF8rPCLFBeADppjmcDYHLr8YsZNU5wK8Dp5IGi%2beVcH/ABiu8Ys31S4q5wJC/o124Sbi%2bXqjpD5HCpDf16TsjIbK1oawNr6RfDpwtcMMOuAXKKUyoA%2bhsGKtg/iVPVmqy0lOScqyp50N/oyo6HY3Jt90WrhuhLnDTDaF3yqpbCTbsLYhHhrBuGqdVJWYlJ6YmZptaVNhxPXqRskdX5QxhZpOrlZczZy8GKq73fjiu/POy6LCfFNeZw7S/DH2nXipYbQ03YFSjfrOgFgYcQnrxpM00ZGrlCkGznNrSq2moNxEQlgeDILb3TpQ8sIjNHsp6BVmq1S2p1ltxoLuFNuboUNxDGF1HdpwZEpS1N82yLc22CAn/wBeDnXENNLccOVCRdR7BESFpeSwUOyswODQHcquP4vlma8aeZSYLKX0yq5oEZEum1k23O417oC4zeSjFns578onXK4VXXPppaGDURZXPqSu4sLA22v6bXgXjA4h7hHipxo5kKprpB7RaGzuhOnpAjbe/v8AevSTA2Zurqm99vX737XFsJ8pOiUTC9Jpb1AqbrklKty6locbAUUpAJFztpDXpT0Afu3VRf8Amtd8ZKgiVmAwHAWkuBYA1Nrb9/wEJpOtau6U9A83Kt%2bK33x7pUUC36uVa32rffGSRtEks7zLyXAkKKb6H1WgoItaxHKnoHVhuq/c613x96U9B83Kt%2bK33xk2Yc559xzKE5zew6ojgoIta1PKnoCgQcOVUj7VrvhHjrlG0XEmDqzRpehVJl6flVy6XHHGylJULXNjeM1zD3OhvxAnInLe9yrW9zEUTSLX/9k=' /%3e%3c/svg%3e" width="690" data-src="/assets/static/js-os-dialog.ae4d66c.f07ac15459475211268af26cc10900b6.png" data-srcset="/assets/static/js-os-dialog.ae4d66c.f07ac15459475211268af26cc10900b6.png 690w" data-sizes="(max-width: 690px) 100vw, 690px" class="mr-3 w-full mb-2 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/js-os-dialog.ae4d66c.f07ac15459475211268af26cc10900b6.png" class="mr-3 w-full mb-2 g-image g-image--loaded" width="690"></noscript><div class="flex flex-col"><h2 class="leading-4 text-xl">Implement the OS supported share dialog ...</h2><span class="font-body text-tiny text-gray-500">3. January 2020</span></div></a></div></div></section></section></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"id":"e1ff3d7506ba977a9568e2fc11d1e598","title":"Optimizing Database Queries in large applications","excerpt":"Static analysis is the method of testing your code for basic logical, runtime or typographical exceptions without actually executing the code.","date":"12. October 2020","timeToRead":4,"canonical":"","category":{"id":"MySQL","title":"MySQL","path":"\u002Fcategory\u002Fmy-sql\u002F"},"author":{"id":"Samuel Olaegbe","title":"Samuel Olaegbe","path":"\u002Fauthor\u002Fsamuel-olaegbe\u002F"},"content":"\u003Ch3 id=\"background\"\u003E\u003Ca href=\"#background\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBackground\u003C\u002Fh3\u003E\n\u003Cp\u003EIn this article we will take a look at how to optimize database queries in a Laravel or PHP application with a MySQL database. At \u003Ca href=\"https:\u002F\u002Fexpenseng.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EExpenseNG\u003C\u002Fa\u003E, our database keeps growing quickly as we record more government expenses from the Nigerian Open Treasury website. For an app that started at a bootcamp, we weren't prepared for the impact a growing database would have on the website. \u003C\u002Fp\u003E\n\u003Cp\u003EWith these amount of records we had the responsibility of visualizing these data on our website in the way that has most meaningful impact and passed across the right information, which is \u003Cstrong\u003EWhere is the government spending most money?\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIf you visit the \u003Ca href=\"https:\u002F\u002Fexpenseng.com\u002Fcontractors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Econtractors\u003C\u002Fa\u003E page on ExpenseNG, you will see the list of everyone that has received money from the government sorted by the contractor who got the most money in the last completed month and you can also see the total amount they got for that month. The data looks like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003EContractor name\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\nTotal Amount Received\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\nMonth Ended\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"the-challenge\"\u003E\u003Ca href=\"#the-challenge\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EThe Challenge\u003C\u002Fh3\u003E\n\u003Cp\u003ENow that we know what the data we need looks like, let's take a look at what it takes to retrieve this data from the database.\u003C\u002Fp\u003E\n\u003Cp\u003ETwo tables are involved in this operation and they are the \u003Ccode\u003Econtractors\u003C\u002Fcode\u003E and \u003Ccode\u003Epayments\u003C\u002Fcode\u003E table. The contractors table holds the records of all everyone that has received money from the government and the payments table holds the records of every payment ever made and a reference to their recipients.\u003C\u002Fp\u003E\n\u003Cp\u003EThe tables schema looks like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003Epayments\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E\n\t- amount (double)\n\t- date (DATE)\n\t- recipient (string)\n\ncontractors\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E\n\t- name (string)\n\t...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo sort the results from getting all the records from the contractors table by the total amount received by a contractor from the past month, that already sounds like a query involving two tables and we can achieve that with something like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-sql\"\u003E\u003Ccode class=\"language-sql\"\u003E\u003Cspan class=\"token keyword\"\u003ESELECT\u003C\u002Fspan\u003E contractors\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003ESELECT\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ESUM\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eamount\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E payments \u003Cspan class=\"token keyword\"\u003EWHERE\u003C\u002Fspan\u003E \nrecipient \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E contractors\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E total \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E contractors \n\u003Cspan class=\"token keyword\"\u003Eorder\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eby\u003C\u002Fspan\u003E total \u003Cspan class=\"token keyword\"\u003Edesc\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EFrom the query above, we have a sub-select statement which helps us to calculate the total money received by all recipients and we can use the result from that sub-query to create a new column in our query which we can now use to sort our final result. The new column created by this sub-query is given an alias of \u003Ccode\u003Etotal\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E\n\u003Cp\u003EThe query above doesn't include the logic for fetching only results from the month ended, so we will modify the query further below:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-sql\"\u003E\u003Ccode class=\"language-sql\"\u003E\u003Cspan class=\"token keyword\"\u003ESELECT\u003C\u002Fspan\u003E contractors\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003ESELECT\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ESUM\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eamount\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E payments \n\u003Cspan class=\"token keyword\"\u003EWHERE\u003C\u002Fspan\u003E recipient \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E contractors\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename \n\u003Cspan class=\"token operator\"\u003EAND\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edate\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003EBETWEEN\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2020\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E09\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E01\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2020\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E09\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E31\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E total \n\u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E contractors \n\u003Cspan class=\"token keyword\"\u003Eorder\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eby\u003C\u002Fspan\u003E total \u003Cspan class=\"token keyword\"\u003Edesc\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn the above query, we have added a new constraint to the sub-query which is \u003Ccode\u003EBETWEEN\u003C\u002Fcode\u003E. As you know this allows us to select only results that start from the first value and end on the second value.\u003C\u002Fp\u003E\n\u003Ch3 id=\"new-problem\"\u003E\u003Ca href=\"#new-problem\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ENew problem\u003C\u002Fh3\u003E\n\u003Cp\u003EThe query above works fine when you have a few records in your database, but when working with a database with thousands of records this can easily result in the query taking several minutes to execute or even resulting in a request timeout error on the server as the server doesn't receive a response for too long.\u003C\u002Fp\u003E\n\u003Cp\u003EWe can easily solve this problem by adding an index to the columns that are pivotal to our query, from the above query the columns we should add an index to are:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Econtractors.name\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epayments.recipient\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epayments.date\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epayments.amout\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EThe query to add an index to our columns will look like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-sql\"\u003E\u003Ccode class=\"language-sql\"\u003E\u003Cspan class=\"token keyword\"\u003EALTER\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003ETABLE\u003C\u002Fspan\u003E contractors \u003Cspan class=\"token keyword\"\u003EADD\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003EINDEX\u003C\u002Fspan\u003E name_index \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EOr if you are using Laravel migrations:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-php\"\u003E\u003Ccode class=\"language-php\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002Fdatabase\u002Fmigrations\u002F2020_09_20_102101_add_index_to_payments_table.php\u003C\u002Fspan\u003E\n\u003Cspan class=\"token scope\"\u003ESchema\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Etable\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'payments'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EBlueprint \u003Cspan class=\"token variable\"\u003E$table\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token variable\"\u003E$table\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eindex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'recipient'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token variable\"\u003E$table\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eindex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'amount'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token variable\"\u003E$table\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eindex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'date'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow we can reduce our query execution time greatly by adding indexes. On ExpenseNG, our queries went from timing out after several minutes to a about 0.02 seconds with a pagination of 20 results per page.\u003C\u002Fp\u003E\n\u003Cp\u003EWe can further improve our query execution time by only selecting the columns that we need, we will change this line to look like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-sql\"\u003E\u003Ccode class=\"language-sql\"\u003E\u003Cspan class=\"token keyword\"\u003ESELECT\u003C\u002Fspan\u003E contractors\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E contractors\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Edate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003ESELECT\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ESUM\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eamount\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E payments \n\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"using-laravels-eloquent\"\u003E\u003Ca href=\"#using-laravels-eloquent\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUsing Laravel's Eloquent\u003C\u002Fh3\u003E\n\u003Cp\u003EWe can achieve the same queries as we did above in Eloquent by using the \u003Ccode\u003EaddSelect\u003C\u002Fcode\u003E method to create a sub-query to our original query:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-php\"\u003E\u003Ccode class=\"language-php\"\u003E\u003Cspan class=\"token scope\"\u003EContractor\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eselect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'name'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token single-quoted-string string\"\u003E'shortname'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token single-quoted-string string\"\u003E'id'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EaddSelect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'total'\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token scope\"\u003EPayment\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EselectRaw\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'SUM(amount)'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t    \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EwhereColumn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'recipient'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token single-quoted-string string\"\u003E'contractors.name'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t    \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EwhereBetween\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'date'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token variable\"\u003E$monthStart\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token variable\"\u003E$monthEnd\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EorderBy\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token single-quoted-string string\"\u003E'total'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token single-quoted-string string\"\u003E'desc'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Epaginate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E20\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EHere we are using Eloquent's advanced sub-queries which gives us a nice and comprehensive API to retrieve results from our model. If we wanted, we could lazy load our \u003Ccode\u003EContractor\u003C\u002Fcode\u003E model relationships by chaining the the select method with \u003Ccode\u003Ewith('payments')-\u003Epaginate(20)\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EAnd that is how you optimize database queries on a large MySQL database.  \u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EAdding an index to a table makes \u003Ccode\u003EUPDATE\u003C\u002Fcode\u003E queries run for a longer time, so you should not use them on tables that will get update frequently.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 id=\"resources\"\u003E\u003Ca href=\"#resources\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EResources\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdzone.com\u002Farticles\u002Fhow-to-optimize-mysql-queries-for-speed-and-perfor\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdzone.com\u002Farticles\u002Fhow-to-optimize-mysql-queries-for-speed-and-perfor\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flaravel.com\u002Fdocs\u002F8.x\u002Fmigrations#indexes\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Flaravel.com\u002Fdocs\u002F8.x\u002Fmigrations#indexes\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flaravel.com\u002Fdocs\u002F8.x\u002Feloquent#advanced-subqueries\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Flaravel.com\u002Fdocs\u002F8.x\u002Feloquent#advanced-subqueries\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","cover":{"type":"image","mimeType":"image\u002Fjpeg","src":"\u002Fassets\u002Fstatic\u002Flarge-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg","size":{"width":970,"height":546},"sizes":"(max-width: 970px) 100vw, 970px","srcset":["\u002Fassets\u002Fstatic\u002Flarge-mysql-db.1b91758.241187f68b97ee1a889effc56f45aff8.jpg 480w","\u002Fassets\u002Fstatic\u002Flarge-mysql-db.4ca991b.241187f68b97ee1a889effc56f45aff8.jpg 970w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 970 546' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-15e0ff934bcba71077197cb8b0880d3c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-15e0ff934bcba71077197cb8b0880d3c)' width='970' height='546' xlink:href='data:image\u002Fjpeg%3bbase64%2c\u002F9j\u002F2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj\u002F2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj\u002FwAARCAAkAEADASIAAhEBAxEB\u002F8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgj\u002FxAApEAACAQMDAwMEAwAAAAAAAAABAgMABBESITEFE1FBYXEUIjIzYqHB\u002F8QAGAEAAwEBAAAAAAAAAAAAAAAAAAECAwT\u002FxAAgEQADAAIDAAIDAAAAAAAAAAAAAQIREgMhMTJBUWGB\u002F9oADAMBAAIRAxEAPwD6poJA52rjMFUk1l9Vjurq1ZbS5W2mzkSMuoAfFVE7P8E3TlZSyafcXzXHlRIy7MAo3JNJorx2qrrV5lQDJ2DHHNVi4Dokd2oiaQaTG5yD7DzVaC2HhMpI9\u002FFW81lGB4tAsSojXZo24I9j6VIX8MXeMzmMxDU%2bsYAHOfim%2bPPxDbHpp0Ul0%2b9jvbZJ4S3bfdSwwSPOKdBzWbly8MpNUsoquPwHzSsv6ZM4xpPPHFOTfqNKalzpJGT6eauPBUZNtcNb2sBjMeCwAVnyCP4mtDvW9yzRTFWZcMUb096pltBLCPpz2hqyUZNj7EUrKGW5lDhgO3sGTbg8H\u002FK6MKu\u002FsyWZ6JLfqRO9ndRzQqjFcj7VIznccjzWfb3M1z0mWaaaSV2hZtYiwDzuqn%2bgedqOhI8vS1EbudSMqntCNR4IX0HimWjj6L05Zb%2bSWWNDgufvYk%2ba1amW5XuTBVVSuSuljv8AuP2XdBMps4VYSg437rZbOfXHrXoI8hd6otNDW8ciLgOoYbY5FMCuPlrZtnXxzrKRXck4UelLdtMYKgiiiifBsmoAGAMCusquMMAR70UUwOpGi\u002FioHwKsFFFSxkhUhRRUMD\u002F\u002F2Q==' \u002F%3e%3c\u002Fsvg%3e"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.a471dd79.js" defer></script><script src="/assets/js/page--src-templates-post-vue.6991587b.js" defer></script>
  </body>
</html>
