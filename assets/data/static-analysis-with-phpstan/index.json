{"hash":"ce3ad6e06e4fef29eebfaa64b3691965d0d0beb0","data":{"post":{"id":"e14932611e456e6c65a4cc682073b8e4","title":"Static analysis with Phpstan","excerpt":"Common native apps like Twitter or any app that allows you to share content outside of them provide support for a dialog that allows you to share their content into other apps that are installed on your phone. In this tutorial, we will take a look at how this is done.","date":"20. January 2020","timeToRead":2,"canonical":"","category":{"id":"PHP","title":"PHP","path":"/category/php/"},"author":{"id":"Samuel Olaegbe","title":"Samuel Olaegbe","path":"/author/samuel-olaegbe/"},"content":"<p>Testing your code is one way to ensure that you have a high quality codebase, which is one way to ensure the maintainability of your projects and also a way to ensure you don't ship broken features in your product. CI tools like <a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Travis CI</a> help you to test your code each time you push to source control.</p>\n<p>While we can all agree that what makes a codebase maintainable ranges from several things such as adhering to certain conventions, avoiding duplication, .......</p>\n<p>Static analysis is the method of testing your code for basic logical, runtime or typographical exceptions without actually executing the code. </p>\n<p>As you must have guessed, static analysis of your codebase happens fast since the code doesn't actually get executed but scanned for common errors like having a method that doesn't return the expected date type.</p>\n<h2 id=\"how-static-analysis-works\"><a href=\"#how-static-analysis-works\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>How static analysis works</h2>\n<p>Todo:</p>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled>  Research whether static analysis actually executes your PHP code</li>\n</ul>\n<p>Static analysis as the name implies, actually doesn't need to execute your code before catching bugs in them. Statically typed languages like Dart or Java already have this functionality built into their compilers. Since they always define the <code>types</code> of their constructs the compiler won't run when there is a typo or an incorrect type for a method or variable. Before the advent of static analysis and tools like PHPStan, developers spend a lot of time debugging their PHP code looking for errors because PHP's execution is line by line and so it only throws an error when it gets to the line containing the error. And may sometimes continue execution after encountering the error, depending on the type of error encountered.</p>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled>  Research the common things it checks for</li>\n</ul>\n<p>PHPStan checks for a couple of language constructs such as use of <code>instanceof</code>, <code>try-catch</code> blocks, <code>typehints</code>, number of arguments passed to a function, accessibility of called methods and variables, <a href=\"https://phpstan.org/blog/find-bugs-in-your-code-without-writing-tests#what-it-currently-checks-for%3F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">and many more</a>.</p>\n<h2 id=\"should-you-bother-about-static-analysis\"><a href=\"#should-you-bother-about-static-analysis\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Should you bother about static analysis?</h2>\n<ul>\n<li>Benefits of static analysis</li>\n</ul>\n<h2 id=\"phpstan-static-analysis-in-your-favourite-language\"><a href=\"#phpstan-static-analysis-in-your-favourite-language\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>PHPStan: Static analysis in your favourite language</h2>\n<ul>\n<li>\n<p>Reference PHPStan website and give an introduction</p>\n<p>  Recently, <a href=\"https://phpstan.org/blog/introducing-phpstan-pro\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PHPStan Pro</a> was announced by the creators of PHPStan and that is already looking very promising with continuous watch mode (hot-reloading in PHP?), a Web UI and an interactive fixer! The good news is you get to save a ton of time and keystrokes by finding errors sooner and PHPStan can suggest a fix for you and everyone is happier.</p>\n</li>\n</ul>\n<h3 id=\"using-phpstan-in-your-projects\"><a href=\"#using-phpstan-in-your-projects\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Using PHPStan in your projects</h3>\n<p>Below we will go over steps to use PHPStan in our projects</p>\n<h3 id=\"setting-up-your-environment\"><a href=\"#setting-up-your-environment\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setting up your environment</h3>\n<ul>\n<li>\n<p>Installing globally</p>\n<pre class=\"language-php line-numbers\"><code class=\"language-php\">composer gloabl <span class=\"token keyword\">require</span> <span class=\"token operator\">--</span>dev phpstan<span class=\"token operator\">/</span>phpstan<span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span></span></code></pre>\n<p>  We are installing <code>phpstan</code> as a dev dependency with composer.</p>\n</li>\n<li>\n<p>Configurations</p>\n<p>  As soon as that is done, then we can start coding</p>\n</li>\n</ul>\n<h3 id=\"nip-it-in-the-bug-\"><a href=\"#nip-it-in-the-bug-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nip it in the bug :)</h3>\n<p>Catch your bugs before they get bigger and cause problems.</p>\n<ul>\n<li>Running the command analysis</li>\n</ul>\n","cover":{"type":"image","mimeType":"image/png","src":"/assets/static/phpstan-cover.33b39b9.4f84e10b267f2418e52beee38767eb0b.png","size":{"width":1261,"height":628},"sizes":"(max-width: 1261px) 100vw, 1261px","srcset":["/assets/static/phpstan-cover.1b91758.4f84e10b267f2418e52beee38767eb0b.png 480w","/assets/static/phpstan-cover.33b39b9.4f84e10b267f2418e52beee38767eb0b.png 1261w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1261 628' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a990670bf1029326c98e49982fe9b25b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a990670bf1029326c98e49982fe9b25b)' width='1261' height='628' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAABYlAAAWJQFJUiTwAAAKcElEQVRo3uVZWXMjVxWWZUmWLMm2JKsldbda%2b9JaWmtrsSx7tjBQIQ9AKLIUk0ASlkBYCv4F71SKkBTFn4BAWB74Xx/fuVLLGluezJBQYcjD0b333HO3c8/y3ZYvfHiMpG5BK9WgFSukKqLHpxB%2bJHryf08%2b%2bTkIxxE6iG3IO/ynKUH6n0bmcd7xY/UvWtE%2b2cBhLIHD%2bBbFrgQOo4kNbQ889Ch2VY9s8SJe37X64fU5YidPpez/ogUcIxiKw78fxX4ghv39mCpDB0cIRlg/iMB/EIY/FEaI7WD4GPuhI/iDHMPSF4iv6qQAx/g5l/CkLqWP/H3W91gKydhg%2bGgzx9563NNa1OeugAMuWGoVMDi3YY8qqDklRRlLQ15rolc5h1O%2bIJ1DS5WgZ08xaOXh1A00Kzm4HQsd1ls1UlVXdeG1azpmjoV%2b02TdQL9lwmG9WsjCymfgNAx0KCNlwdCe6eA3FLVVf1YFKgU0nAaGyy7cyx5G522Mlg7yVZMbs%2bG272HSeQFu6wGK%2bTbSp0m0GybGbQtDKuKsX%2bDhdfTsPBqlnFKOHLxVNTB3Cph2LXVwlzzpa5R1GHoGI47vcZ6BbaJiZXAQOVGuuHKXK3fbrt9Gu2S2eU9SilJAtdJCociDjy/hOBP0h3PU6h3kmRkm8wWqrRa6gyHqdhu%2bvQP46C6K/IeKxJz36DZ7wZgyaWX6%2b%2bzzRVjGVJ/Iq9IfwZ7qC3OuyHp8HMGDKAKhKEIMyPvBwxv1IIPzQeRY8aTt9Qvfk/HkPF7wKQK6UkBvMMXQPUOn4%2bA4mUOnO0a7O4DTG0M3iqrdH7iUm6DbG8FudzEYuqyPkS9UUaCipG0xher5MvJWGYPxAu5khmqtiY4zxtn5HQxGM4y5TtsZYbm8oMwZx43VPCIzm1%2bo%2bvLyHqbTM8UbTRa8kAnszgClcp1zzLmvEfcjYwbos%2b1Ol%2bj1x3Bn56hUbdTsHmZnF6g2OojGPs0CIkfQzTIP1Ue93kbOoEm3e2jYDhcYoVxpqL5KzUarO1SLV2st2K2e4pcqTaWEJtvFcoPKaNB6bDRaXdS4gfniUikzeZqDlrNgUEG6WVJKknZWMEg2D4M8IanLfLpZ4F6KMK2K2pPwT5KaUnAml0eWJDzpzxdqSkb6tKyJdHa1jvTH4slPV0D86JSaa3EDZeS4cL6w2qSRL3GBsppMSn29yU2bG5TNyibMNU/qclNahr6er%2bL84j7nbtLMozTh%2bMZEhcSEPdrmrUz5pqzsdfe46I05vfquw2/zfB4jsDVJILQu13657V/bbaFt/7vieQdgnNgLKRlZQw4gfrwqb6cr2aPPVdaT31aCAkJRmsmpZuA0bdBUdSRSGSSSWaROV23hS38ypSOdMRVlaF7bpbZVKjPc1PNKRsZrW2U6Y2zmUrJSqj7zs8lqT5LVFfh6zAK8RiKVRjZvQC%2bYDBwJJNIaCvUCeTy0nkNKy8AomfTDtFJY7Cj1HFJytwuIWeasHNpuHf1FUwGLREZDf2ljSIDUHNcIkqpYvNhH1swplPg4pr/9bbDNC18DLNflr8uGD3fPu2us4u9Y47YxN1wgRVOXSC1mn0hlcZzQcHREOtZYz5CfU3XpS5LEvJKnWTVG8Vh6Zphct2VMKq0r05MIrtzo1JPV132Gkr%2bSNTayqa25pc%2bbV0xa2mklm1ntgaW3lsiJG6/WW82h5Lnnw9gOC5BomWE6kmjtBQsZbHeGzKVtVOstlZLqTHVSl3Qni5hMP1UCphLHVZga84WKWqzE1Cm8QqmufFDSU63ZZaYoqawh68j80k5zw5Kvi8wcWaZFnbw6ZSXDZHWuyb4C8UWFKbppd2FJ1lGp0FK4Q1JtjXuSMUWmZIkXVcUjauVlVKoNtZ7MIee6bh0rBbBD5VxOrFINHyu6YeLh/QXRH%2bHxeM7cL7m9jxGBTLPlqI30hjMM2WcTNwiAqXMjJpUgeV/AS63ZUQeS9nxxVymk1iaWICAyig00e1OizSbsnguHwEZSaINKnp3fVYBm4C5wcecBcUlfHW4bdwh2kYsQxdZ5SW1iFFGSWIBDwCZ7yplFhUlEATb3LPD4uttsgqCXOyVKBpjCDD2L%2b/MKYidZOH1XUa8/wXhypsy4w/Z0tlTIrOsMYVjM%2bctLhcY6bNvtgVJOgqbX57gmN5kqtaH358g6C%2bQHF8i1ZihNX0A0nadyqrCskrq9dttRlzGZXXCsi9FoihSDr8%2b3z9dqmHSAAFPrni/AVyzbAcJrfwj%2bvSCCwidPyE%2b%2bpGF/YJWqd8Ui3y6cLFZwdJLmrU6Q5w0WeXN9IkAxu1argzrhraQ2gaOFYlmhRJdQ2CAak1sejibo8UYMWlWbmtfpXv3%2biIrpw%2baNyVyaWYE1vofi8BLl2QsoT%2b4j353D7MxRmvDh5V7CYLswukBxdInK/CuonX8NFhVXnrGf75b68iVoRbqTVUd5eh/l%2bUPkGn00qESFTmkxQ1qbbli3vgl82x2ej4RZxhJZlFsD5BsDlJ05GsMzZCpd2NO7qLl3YLVcFFpUSqWNUv%2bM/QuYdcLhzgSN8QUzxyXM5hDNCWXtAaqUKffmqPRmaPSnyFXps%2b4DFIZL5Pu0iN5i3b6jFFJy70LjesXRHR72HlIFG0mzSqqRKjjRy2o/8VQO0RMGZ6OMlNXAUdrcBL9MrqCQ69ETPvFtLOCQmUBu3ftElsiWkCnzbWC7ykyN7gSF3hksbjDXmqjNmr0lKjNC3cVXocttUVH53jkP8FC1S7zV8uIhD3CBAuWt4V3e4JKHaSJb66HMQ5odWk7bhdmeoHL2Iqq8RbMzVbeulRkAh7xx9x6ytKZAIIyQQGp5GYYJdUMRdVnq8oRH5Bkm3A5FVrDZc%2btdqfkxBYhQgQFFTNrD4fLYOF/e4QvQhTueosQoKoHOdWfodnvIMtq2uyP65wxOt4%2bxBD1GXI38AYPQgGYuwa/IoFirNRgPpnD42pRoLAG123U4li7GQNXlq8%2bma2laDuPxRD3GOpxT4oaYskPZLl%2bDC74rMkR0AtVXFrsNg4//cyh8GEsq//ZgrZdbcyoV0YwYnaWUtCIPIeHLw0jSm9f2ygzltvuyimet5lm/0KRf1tK356IiNL7ipO2RjFElY4vURRnS9uDuFRS%2bKq%2bgsLGBwhuZ9BOg8Da8lbrX3tSvtwkrBTJ77V1jds6zrt8md73/qkyqNCb1%2bGeAwzdcILz9hfdLQNFoYnVxa1IxwBeSz1sHK2LeVKXkUI8nxLyqaJsnMsHIqnxeKchI%2bevlPfzxzXfw2zfexvss33/0Fj765qv43Wtv4oNX38DvX3mED19%2bDR9%2b%2b3W2H%2bGDV77Lvjfw0Te%2bgz%2b89C3Sy88t%2bQJUwG8efh3/eu9X%2bNO7v8CfWX787s/x90fv4C8/%2bhk%2b/skv8dcfvodP3voxPnn7XdZ/qkj6/vbmD/DP176Hf7z%2b/eeWlAuIEvyEkPLlZj%2bwKv3rL6uK6CL%2bNcnXnv31lyCR8cvYcOy5Jd%2bX5U/QJ/43%2bKyDbhvzpI8RN2X/h/4dftaDx%2bKJ9T%2b7j/fFjxKbw61krvjXEVgsvvpL64tWxL8Bhh1xjbW2SDsAAAAASUVORK5CYII=' /%3e%3c/svg%3e"}}},"context":{}}